<app-header></app-header>

<div style="display: flex; flex-direction: column; min-height: calc(100vh - 4rem); background-color: hsl(var(--background)); padding: 2rem 1rem;">
  <main style="display: flex; align-items: center; justify-content: center; flex: 1;">
    <div style="width: 100%; max-width: 28rem;">
      <!-- TÃ­tulo -->
      <div style="text-align: center; margin-bottom: 2rem;">
        <h1 style="font-size: 1.875rem; font-weight: bold; color: hsl(var(--foreground)); margin-bottom: 0.5rem;">Crear cuenta</h1>
        <p style="color: hsl(var(--muted-foreground));">Ãšnete a Estudiamos para colaborar</p>
      </div>

      <!-- Formulario -->
      <div style="background-color: hsl(var(--card)); border: 1px solid hsl(var(--border)); border-radius: 0.5rem; padding: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" style="display: flex; flex-direction: column; gap: 1rem;">
          <!-- Nombre -->
          <div>
            <label for="name" style="display: block; font-size: 0.875rem; font-weight: 500; color: hsl(var(--foreground)); margin-bottom: 0.5rem;">
              Nombre completo
            </label>
            <input
              id="name"
              type="text"
              formControlName="name"
              placeholder="Tu nombre"
              style="width: 100%; padding: 0.5rem 0.75rem; border: 1px solid hsl(var(--border)); border-radius: 0.375rem; background-color: hsl(var(--input)); color: hsl(var(--foreground)); font-size: 0.875rem;"
              required
            />
            <div *ngIf="name.invalid && name.touched" style="color: hsl(var(--destructive)); font-size: 0.75rem; margin-top: 0.25rem;">
              El nombre es requerido
            </div>
          </div>

          <!-- Email -->
          <div>
            <label for="email" style="display: block; font-size: 0.875rem; font-weight: 500; color: hsl(var(--foreground)); margin-bottom: 0.5rem;">
              Correo electrÃ³nico
            </label>
            <input
              id="email"
              type="email"
              formControlName="email"
              placeholder="tu@email.com"
              style="width: 100%; padding: 0.5rem 0.75rem; border: 1px solid hsl(var(--border)); border-radius: 0.375rem; background-color: hsl(var(--input)); color: hsl(var(--foreground)); font-size: 0.875rem;"
              required
            />
            <div *ngIf="email.invalid && email.touched" style="color: hsl(var(--destructive)); font-size: 0.75rem; margin-top: 0.25rem;">
              Ingresa un correo vÃ¡lido
            </div>
          </div>

          <!-- ContraseÃ±a -->
          <div>
            <label for="password" style="display: block; font-size: 0.875rem; font-weight: 500; color: hsl(var(--foreground)); margin-bottom: 0.5rem;">
              ContraseÃ±a
            </label>
            <div style="position: relative;">
              <input
                id="password"
                [type]="showPassword ? 'text' : 'password'"
                formControlName="password"
                placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                style="width: 100%; padding: 0.5rem 0.75rem; padding-right: 2.5rem; border: 1px solid hsl(var(--border)); border-radius: 0.375rem; background-color: hsl(var(--input)); color: hsl(var(--foreground)); font-size: 0.875rem;"
                required
              />
              <button
                type="button"
                (click)="showPassword = !showPassword"
                style="position: absolute; right: 0.75rem; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: hsl(var(--muted-foreground)); padding: 0;"
              >
                {{ showPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
              </button>
            </div>
            <div *ngIf="password.invalid && password.touched" style="color: hsl(var(--destructive)); font-size: 0.75rem; margin-top: 0.25rem;">
              MÃ­nimo 6 caracteres
            </div>
          </div>

          <!-- Confirmar ContraseÃ±a -->
          <div>
            <label for="confirmPassword" style="display: block; font-size: 0.875rem; font-weight: 500; color: hsl(var(--foreground)); margin-bottom: 0.5rem;">
              Confirmar contraseÃ±a
            </label>
            <div style="position: relative;">
              <input
                id="confirmPassword"
                [type]="showConfirmPassword ? 'text' : 'password'"
                formControlName="confirmPassword"
                placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                style="width: 100%; padding: 0.5rem 0.75rem; padding-right: 2.5rem; border: 1px solid hsl(var(--border)); border-radius: 0.375rem; background-color: hsl(var(--input)); color: hsl(var(--foreground)); font-size: 0.875rem;"
                required
              />
              <button
                type="button"
                (click)="showConfirmPassword = !showConfirmPassword"
                style="position: absolute; right: 0.75rem; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: hsl(var(--muted-foreground)); padding: 0;"
              >
                {{ showConfirmPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
              </button>
            </div>
            <div *ngIf="confirmPassword.invalid && confirmPassword.touched" style="color: hsl(var(--destructive)); font-size: 0.75rem; margin-top: 0.25rem;">
              MÃ­nimo 6 caracteres
            </div>
          </div>

          <!-- TÃ©rminos -->
          <div style="display: flex; align-items: center; gap: 0.5rem;">
            <input
              id="terms"
              type="checkbox"
              formControlName="terms"
              style="cursor: pointer; width: 1rem; height: 1rem;"
            />
            <label for="terms" style="font-size: 0.875rem; color: hsl(var(--muted-foreground)); cursor: pointer;">
              Acepto los tÃ©rminos y condiciones
            </label>
          </div>
          <div *ngIf="terms.invalid && terms.touched" style="color: hsl(var(--destructive)); font-size: 0.75rem; margin-top: -0.5rem;">
            Debes aceptar los tÃ©rminos y condiciones
          </div>

          <!-- Mensaje de error -->
          <div *ngIf="error" style="padding: 0.75rem; background-color: rgba(220, 38, 38, 0.1); color: hsl(var(--destructive)); border-radius: 0.375rem; font-size: 0.875rem; border: 1px solid hsl(var(--destructive));">
            {{ error }}
          </div>

          <!-- BotÃ³n de envÃ­o -->
          <button
            type="submit"
            [disabled]="registerForm.invalid || isLoading"
            style="padding: 0.75rem; background-color: hsl(var(--primary)); color: hsl(var(--primary-foreground)); border: none; border-radius: 0.375rem; font-weight: 600; cursor: pointer; font-size: 0.875rem; transition: opacity 0.3s; display: flex; align-items: center; justify-content: center; gap: 0.5rem;"
            (mouseenter)="onButtonHover($event, '0.9')"
            (mouseleave)="onButtonHover($event, '1')"
            [style.opacity]="registerForm.invalid || isLoading ? '0.5' : '1'"
            [style.cursor]="registerForm.invalid || isLoading ? 'not-allowed' : 'pointer'"
          >
            <span *ngIf="!isLoading">âœ“ Registrarse</span>
            <span *ngIf="isLoading" style="display: inline-flex; gap: 0.25rem; align-items: center;">
              <span style="animation: pulse 1s infinite;">â³</span>
              Creando...
            </span>
          </button>
        </form>
      </div>

      <!-- Link a login -->
      <div style="text-align: center; margin-top: 1.5rem; font-size: 0.875rem; color: hsl(var(--muted-foreground));">
        Â¿Ya tienes cuenta?
        <a routerLink="/login" style="color: hsl(var(--primary)); text-decoration: none; font-weight: 500; cursor: pointer;">
          Inicia sesiÃ³n
        </a>
      </div>
    </div>
  </main>
</div>

<app-footer></app-footer>
